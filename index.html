<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ice Cube - Login</title>
    <link rel="stylesheet" type="text/css" href="style.css">
</head>
<body>

    <div class="quadrado">
        <!-- Texto de boas-vindas -->
        <h2 class="texto-pomposo">Bem-vindo ao Ice Cube</h2>
        <br>
        <!-- Opções de entrada de texto -->
        <label class="kk" for="usuario">Usuário&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Senha</label>

        <!-- Link para cadastro -->
        <form onsubmit="submitLoginForm(event)">
            <input type="text" name="name" required>
            <input type="password" name="password" required>
            <br><br><br>
            <input type="submit" value="Login" id="butaokk">
        </form>
        <a href="second.html">Não tem conta? Registre-se!</a>
    </div>

    <script type="text/javascript">
        function submitLoginForm(event){
            event.preventDefault();

            const name = document.querySelector('input[name="name"]').value;
            const password = document.querySelector('input[name="password"]').value;

            fetch('http://localhost:3000/verificarUsuario', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({ name, password }),
            })
            .then(response => {
                if (!response.ok) {
                    throw new Error(`Erro ao verificar usuário: ${response.status} - ${response.statusText}`);
                }
                return response.json();
            })
            .then(data => {
                console.log(data);
                alert('Usuário verificado com sucesso! Redirecionando para home.html.');
                window.location.href = 'home.html'; // Redirecionar para home.html
            })
            .catch(error => {
                console.error(error);
                alert('Erro ao verificar usuário. Verifique o console para mais informações.');
            });
        }
    </script>    
</body>
</html>